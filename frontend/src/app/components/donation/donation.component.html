<div class="donation-container">
  <mat-card class="donation-card">
    <mat-card-header>
      <div mat-card-avatar class="donation-avatar">
        <mat-icon>favorite</mat-icon>
      </div>
      <mat-card-title>Faire une donation</mat-card-title>
      <mat-card-subtitle>Soutenez QuizzGame et aidez-nous à grandir !</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <div class="donation-content">
        <div class="amount-section">
          <h3>
            <mat-icon>euro</mat-icon>
            Choisissez un montant :
          </h3>
          <div class="predefined-amounts">
            <button mat-raised-button *ngFor="let predefinedAmount of predefinedAmounts"
              [color]="amount === predefinedAmount ? 'primary' : 'basic'" class="amount-button"
              (click)="selectAmount(predefinedAmount)" [disabled]="isLoading">
              {{ predefinedAmount }}€
            </button>
          </div>
        </div>

        <div class="custom-amount-section">
          <h3>
            <mat-icon>edit</mat-icon>
            Ou entrez un montant personnalisé :
          </h3>
          <div class="custom-amount-input">
            <mat-form-field appearance="outline" class="amount-field">
              <mat-label>Montant personnalisé</mat-label>
              <input matInput type="number" min="1" max="10000" step="0.01" [(ngModel)]="customAmount"
                (input)="useCustomAmount()" placeholder="Entrez un montant" [disabled]="isLoading">
              <mat-icon matPrefix>euro</mat-icon>
            </mat-form-field>
          </div>
        </div>
        <div class="amount-summary" *ngIf="amount">
          <div class="selected-amount">
            <mat-icon>check_circle</mat-icon>
            <strong>Montant sélectionné : {{ amount }}€</strong>
          </div>
          <p class="donation-message">
            Votre générosité nous aide à améliorer continuellement QuizzGame
            et à offrir une meilleure expérience à tous nos utilisateurs.
          </p>
        </div>

        <div class="info-section">
          <div class="payment-info">
            <h4>
              <mat-icon>lock</mat-icon>
              Paiement sécurisé
            </h4>
            <p>
              Vos données de paiement sont sécurisées par Stripe,
              leader mondial des solutions de paiement en ligne.
            </p>
          </div>

          <div class="features-info">
            <h4>
              <mat-icon>rocket_launch</mat-icon>
              Votre donation nous aide à :
            </h4>
            <ul>
              <li>Améliorer les fonctionnalités existantes</li>
              <li>Ajouter de nouveaux types de quiz</li>
              <li>Maintenir les serveurs performants</li>
              <li>Développer l'application mobile</li>
            </ul>
          </div>
        </div>
      </div>
    </mat-card-content>

    <mat-card-actions align="end">
      <button mat-raised-button color="primary" class="donate-button" [disabled]="!isAmountValid() || isLoading"
        (click)="donate()">
        <mat-spinner *ngIf="isLoading" diameter="20" class="spinner"></mat-spinner>
        <span *ngIf="!isLoading">
          <mat-icon>credit_card</mat-icon>
          Faire un don de {{ amount }}€
        </span>
        <span *ngIf="isLoading">Redirection vers le paiement...</span>
      </button>
    </mat-card-actions>
  </mat-card>
</div>